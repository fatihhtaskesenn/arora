# ===========================================
# Teknolojiler: Next.js (App Router), React, TailwindCSS, Supabase
# AmaÃ§: Modern UI/UX, eriÅŸilebilirlik, performans ve gÃ¼venlik Ã¶ncelikli e-ticaret + portfolyo sitesi
# Son gÃ¼ncelleme: 2025-11-01
# ===========================================

# GENEL PRENSÄ°PLER
- KullanÄ±lacak teknolojiler: Next.js (app/), React, TailwindCSS, Supabase (auth, db, storage), Framer Motion, TypeScript (Ã¶nerilir).
- UI/UX hedefi: temiz, anlaÅŸÄ±lÄ±r, eriÅŸilebilir (WCAG AA), mobil-Ã¶ncelikli (mobile-first) tasarÄ±m, mikro-animasyonlarla akÄ±cÄ± geÃ§iÅŸler.
- Kod kalitesi: TypeScript tercih edilir; ESLint + Prettier + Husky (pre-commit) + commitlint ile standardize edilecek.
- BileÅŸen mimarisi: Atomic Design yaklaÅŸÄ±mÄ± (atoms/molecules/organisms/pages) veya benzeri modÃ¼ler yapÄ± kullanÄ±lmalÄ±.
- TÃ¼m metinler ve iÃ§erikler iÃ§in i18n altyapÄ±sÄ± dÃ¼ÅŸÃ¼n (en azÄ±ndan TR/EN hazÄ±r olmalÄ±).
- Performans: Lighthouse 90+ hedefi; kritik kaynaklarÄ± Ã¶nceliklendir, image lazy-loading, code-splitting, ISR/SSR dengesi.

# STIL & TASARIM SÄ°STEMÄ°
- TasarÄ±m tokenleri (colors, spacing, typography, radius, shadows) `design-tokens.json` iÃ§inde saklanmalÄ±.
- Renk paleti:
  - Primary / Accent: #f97316 (turuncu) â€” marka vurgu rengi
  - Neutral: beyaz / #f8fafc / #e5e7eb / #111827
  - Success / Error / Info renkleri tanÄ±mlÄ± olmalÄ±
- Tipografi:
  - BaÅŸlÄ±k fontu: modern, okunaklÄ± (Ã¶rn. Inter veya Poppins)
  - GÃ¶vde fontu: Inter veya system font fallback
  - Ã–lÃ§ek: 6-8ms typographic scale ile h1..h6 belirlenmeli
- UI Kit:
  - Tailwind + komponent kÃ¼tÃ¼phanesi (shadcn/ui veya Radix UI) ile eriÅŸilebilir bileÅŸenler.
  - Button, Input, Modal, Card, Toast, Tooltip, Navbar, Footer bileÅŸenleri reusable olmalÄ±.
- Motion:
  - Framer Motion kullanÄ±lacak; animasyonlar soft, hÄ±zlÄ± (duration 120â€“300ms), kullanÄ±cÄ± tercihi (reduced-motion) dikkate alÄ±nmalÄ±.
  - Page transitions, hover micro-interactions ve load skeletons uygulanmalÄ±.
- UI/UX Pratikleri:
  - Clear visual hierarchy; CTAâ€™lar belirgin ve tutarlÄ±.
  - Formlar: label, helper text, error text ve client-side validation (zod veya yup).
  - Accessibility: aria-* etiketleri, focus yÃ¶netimi, kontrast kontrolÃ¼ (AA).
  - Responsive breakpoints: mobile (â‰¤640px), tablet (641â€“1024px), desktop (â‰¥1025px).

# KLASÃ–R YAPISI (GÃœNCELLEME)
app/
 â”œâ”€ layout.tsx
 â”œâ”€ globals.css
 â”œâ”€ page.tsx (Anasayfa)
 â”œâ”€ products/
 â”‚   â”œâ”€ page.tsx
 â”‚   â”œâ”€ [id]/page.tsx
 â”œâ”€ projects/
 â”‚   â”œâ”€ page.tsx
 â”œâ”€ contact/
 â”‚   â”œâ”€ page.tsx
 â”œâ”€ admin/
 â”‚   â”œâ”€ page.tsx
 â”‚   â”œâ”€ dashboard/
 â”‚       â”œâ”€ page.tsx
components/
 â”œâ”€ atoms/
 â”‚   â”œâ”€ Button.tsx
 â”‚   â”œâ”€ Input.tsx
 â”‚   â”œâ”€ Image.tsx (wrapper over next/image with lazy+placeholder)
 â”œâ”€ molecules/
 â”‚   â”œâ”€ ProductCard.tsx
 â”‚   â”œâ”€ ProductGrid.tsx
 â”œâ”€ organisms/
 â”‚   â”œâ”€ Navbar.tsx
 â”‚   â”œâ”€ Footer.tsx
 â”‚   â”œâ”€ HeroSection.tsx
 â”œâ”€ templates/
 â”œâ”€ hooks/
 â”œâ”€ lib/
 â”œâ”€ styles/ (Tailwind config + design tokens)
public/
 â”œâ”€ assets/

# GEREKLÄ° KURULUMLAR VE KOMUTLAR
- Node.js LTS (20+) Ã¶nerilir.
- Proje baÅŸlatma:
  - `npx create-next-app@latest --ts --experimental-app` (veya Next.js 14 scaffolding)
- Paketler (Ã¶rnek):
  - Tailwind: `npm install -D tailwindcss postcss autoprefixer` ve `npx tailwindcss init -p`
  - Supabase: `npm install @supabase/supabase-js`
  - Framer Motion: `npm install framer-motion`
  - Shadcn / Radix UI (opsiyonel): `npm install @radix-ui/react-*` veya `shadcn/ui`
  - Zod (validation): `npm install zod`
  - React Icons: `npm install react-icons`
  - ESLint / Prettier / Husky / lint-staged / commitlint: (setup komutlarÄ±na gÃ¶re)
- Tailwind ayarlarÄ±:
  - `tailwind.config.js` iÃ§inde theme extend ile design tokens'e baÄŸlÄ± renk/spacing tanÄ±mla.
  - `content` paths: `./app/**/*.{js,ts,jsx,tsx}`, `./components/**/*.{js,ts,jsx,tsx}`
- TypeScript:
  - `tsconfig.json` optimize edilecek; `strict` mod Ã¶nerilir.

# SUPABASE SETUP (ENV & POLICY)
- Ortam deÄŸiÅŸkenleri (Ã¶rnek `.env.local`):
  - NEXT_PUBLIC_SUPABASE_URL=
  - NEXT_PUBLIC_SUPABASE_ANON_KEY=
  - SUPABASE_SERVICE_ROLE_KEY (sadece sunucu-side/CI iÃ§in)
- Ã–nerilen tablolar: products, projects, messages, orders, users
- Storage bucket: `public-assets` veya `project-images`
- Policies:
  - Public read iÃ§in `SELECT` izni olabilir; yazma/CRUD sadece authenticated kullanÄ±cÄ±lar/role kontrolÃ¼ ile
  - Her tablo iÃ§in RLS (Row Level Security) aÃ§Ä±k olmalÄ± ve policy'ler aÃ§Ä±klÄ± seÃ§ilmeli.
- Backup:
  - DÃ¼zenli dump veya Supabase snapshot planÄ± (production iÃ§in) dÃ¼ÅŸÃ¼n.

# AUTHENTICATION & AUTH FLOW
- Supabase Auth (email/password) kullan.
- Admin rolÃ¼: kullanÄ±cÄ± attribute veya ek tablo (roles) ile admin yetkilendirmesi yapÄ±lmalÄ±.
- Admin panel sadece auth + role check sonrasÄ± eriÅŸilebilir olmalÄ± (server-side guards veya middleware).
- Session management NextAuth benzeri pattern yerine Supabase client ile yapÄ±labilir, ama refresh token yÃ¶netimi dÃ¼ÅŸÃ¼nÃ¼lmeli.

# SECURITY & SEO
- Security headers: CSP, X-Frame-Options, X-Content-Type-Options, Referrer-Policy (Next.js headers in next.config).
- CSP: img-src, script-src, style-src ayarlarÄ±nÄ± sÄ±kÄ± tut.
- Rate limiting (API endpoints): edge middleware veya serverless functionâ€™larda throttling.
- Input sanitization (Ã¶zellikle messages, product descriptions).
- SEO: dynamic meta tags, OpenGraph, Twitter Cards; structured data (JSON-LD) Ã¼rÃ¼n sayfalarÄ± iÃ§in.
- Robots.txt ve sitemap.xml otomatik generation (next-sitemap veya custom).

# PERFORMANCE & MONITORING
- Image optimization: `next/image`, AVIF/WebP tercih et.
- Critical CSS minimizasyon, Tailwind purge (content) aktif.
- ISR/SSR: Ã¼rÃ¼n listesi statik cache, Ã¼rÃ¼n detay dinamik veya revalidate ile.
- Analytics & Monitoring: Vercel Analytics, Google Analytics 4 veya Plausible gibi lightweight seÃ§enek.
- Error monitoring: Sentry veya alternatif (production).

# TEST & CI/CD
- Unit tests: Jest + React Testing Library
- E2E: Playwright veya Cypress (kritik flows: checkout, admin CRUD)
- CI: GitHub Actions veya GitLab CI
  - Steps: install -> lint -> test -> build -> deploy
  - Secrets: SUPABASE keys vs environment variables
- Pre-deploy checks: accessibility audit (axe-core), lighthouse score gate (opsiyonel)

# DEPLOYMENT
- Ã–nerilen: Vercel (Next.js native), alternatif Netlify/Cloudflare Pages + Edge Functions
- Environment variables ayarlanmalÄ± (Vercel Secrets)
- Build optimizations: image domain whitelist, env-based feature flags

# ANALYTICS & PRIVACY
- GDPR/TKV uyumluluÄŸu: cookie banner & explicit consent (analytics iÃ§in)
- Minimal tracking tercih et (Plausible veya server-side GA)

# ACCESSIBILITY
- Contrast >= AA
- Form eriÅŸilebilirliÄŸi (label + aria-describedby)
- Keyboard navigation & focus visible
- Reduced motion preference respect

# UX DETAYLARI (MADDE MADDE)
- Sepet deneyimi: persistent cart (localStorage + server sync on auth)
- Checkout stub: minimal â€” Ã¶deme entegrasyonu planlanacak (Stripe veya yerel pos entegrasyonu)
- Inline feedback: form error + success toast
- Skeleton loaders for image-heavy pages
- Filter & sort on products page + pagination or infinite scroll (infinite scroll iÃ§in ARIA pattern dÃ¼ÅŸÃ¼n)
- Lightbox for project gallery with keyboard controls

# LOCAL DEVELOPMENT SCRIPTS (package.json Ã¶rnek)
- "dev": "next dev"
- "build": "next build"
- "start": "next start"
- "lint": "eslint . --ext .ts,.tsx"
- "format": "prettier --write ."
- "test": "jest"

# CODING STANDARDS
- Atomic components, single responsibility
- Props typing (TypeScript)
- No inline styles; Tailwind utility classes or className composition used
- Reusable hookâ€™lar (useProducts, useAuth, useUpload)
- Error handling: try/catch + user-friendly errors

# DOCUMENTATION
- README.md: setup, env vars, db migration steps, supabase init
- Contributing.md + code style guide
- Design tokens dosyasÄ± varsa storybook (opsiyonel) ile komponent library sun

# NOTES (Ã–zel Gereksinimler)
- Admin route: `/admin` â€” login sayfasÄ±; login baÅŸarÄ±lÄ± ise `/admin/dashboard`
- ÃœrÃ¼n detay: resimler slider; fiyat, stok (opsiyonel), kategori, Ã¶zellikler
- Projects (YaptÄ±ÄŸÄ±mÄ±z iÅŸler): sadece gÃ¶rsel + kÄ±sa baÅŸlÄ±k; fiyat yok
- Cursor yapay zekasÄ±na: bu dosyada yazan kurallarÄ± referans alarak component'leri Ã¼ret ve oluÅŸtururken
  - "use Tailwind + Framer Motion"
  - "WCAG AA uyumluluÄŸu"
  - "Supabase auth ve storage entegrasyonunu kullan"
  - "TypeScript ile yaz"
  - "Unit test ve ESLint dÃ¼zenlemelerini unutma"






# ==========================================================
# ğŸ” Supabase YapÄ±landÄ±rmasÄ±
# ==========================================================
supabase:
  project_name: arora_site
  env_variables:
    NEXT_PUBLIC_SUPABASE_URL: "https://<YOUR_SUPABASE_URL>.supabase.co"
    NEXT_PUBLIC_SUPABASE_ANON_KEY: "<YOUR_SUPABASE_ANON_KEY>"
    SUPABASE_SERVICE_ROLE_KEY: "<YOUR_SUPABASE_SERVICE_ROLE_KEY>"

  database:
    tables:
      - name: users
        description: Admin ve diÄŸer kullanÄ±cÄ± hesaplarÄ±nÄ± tutar.
        columns:
          - id: uuid (primary key)
          - email: text (unique, not null)
          - password_hash: text (not null)
          - role: text (default: "user") # admin / user
          - created_at: timestamp (default now())
        rls:
          enabled: true
          policies:
            - name: "Users can view themselves"
              definition: "auth.uid() = id"
              for: select
            - name: "Only admin can insert/update/delete"
              definition: "auth.role() = 'admin'"
              for: all

      - name: products
        description: Site Ã¼rÃ¼nlerini tutar.
        columns:
          - id: uuid (primary key)
          - name: text (not null)
          - category: text (not null)
          - category_id: text
          - description: text
          - features: jsonb
          - image_url: text
          - in_stock: boolean (default true)
          - stock: int (default 0)
          - badge: text
          - created_at: timestamp (default now())
          - updated_at: timestamp (default now())
        rls:
          enabled: true
          policies:
            - name: "Anyone can read products"
              definition: "true"
              for: select
            - name: "Only admin can modify products"
              definition: "auth.role() = 'admin'"
              for: insert, update, delete

      - name: projects
        description: Firma projelerini tutar.
        columns:
          - id: uuid (primary key)
          - title: text (not null)
          - description: text
          - image_url: text
          - category: text
          - created_at: timestamp (default now())
        rls:
          enabled: true
          policies:
            - name: "Anyone can read projects"
              definition: "true"
              for: select
            - name: "Only admin can modify projects"
              definition: "auth.role() = 'admin'"
              for: insert, update, delete

      - name: messages
        description: Ä°letiÅŸim formu mesajlarÄ±nÄ± tutar.
        columns:
          - id: uuid (primary key)
          - name: text
          - email: text
          - subject: text
          - message: text
          - created_at: timestamp (default now())
        rls:
          enabled: true
          policies:
            - name: "Anyone can insert messages"
              definition: "true"
              for: insert
            - name: "Only admin can read/delete messages"
              definition: "auth.role() = 'admin'"
              for: select, delete

  storage:
    buckets:
      - name: product-images
        public: true
        file_size_limit_mb: 10
        rls:
          - name: "Anyone can read"
            definition: "true"
          - name: "Only admin can upload/delete"
            definition: "auth.role() = 'admin'"

      - name: project-images
        public: true
        file_size_limit_mb: 10
        rls:
          - name: "Anyone can read"
            definition: "true"
          - name: "Only admin can upload/delete"
            definition: "auth.role() = 'admin'"

# ==========================================================
# âš™ï¸ Cursor Kodlama KurallarÄ±
# ==========================================================
rules:
  - when_creating_files:
      - All Supabase config files must be stored in `lib/supabaseClient.js`
      - .env.local must contain all Supabase keys
      - Admin dashboard pages go under `/app/admin/`
  - enforce_code_style:
      - use_hooks: true
      - prefer_async_await: true
      - naming_convention: camelCase for JS
      - components_folder_structure: atomic_design
  - nextjs_best_practices:
      - use_server_components: true where possible
      - optimize_images: true
      - metadata_api: true for SEO
  - supabase_best_practices:
      - always_use_service_role_for_admin_actions: true
      - protect_env_keys: true
      - never_expose_service_key_on_client: true

# ==========================================================
# ğŸš€ Otomatik Komutlar (Cursor)
# ==========================================================
commands:
  setup_supabase:
    - "npm install @supabase/supabase-js"
    - "touch lib/supabaseClient.js"
    - |
      echo "
      import { createClient } from '@supabase/supabase-js';

      const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
      const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;

      export const supabase = createClient(supabaseUrl, supabaseAnonKey);
      "
  create_admin_page:
    - "mkdir -p app/admin"
    - "touch app/admin/page.jsx"
    - |
      echo "
      'use client';
      import { useEffect, useState } from 'react';
      import { supabase } from '@/lib/supabaseClient';

      export default function AdminDashboard() {
        const [products, setProducts] = useState([]);

        useEffect(() => {
          const fetchProducts = async () => {
            const { data } = await supabase.from('products').select('*');
            setProducts(data);
          };
          fetchProducts();
        }, []);

        return (
          <main className='p-8'>
            <h1 className='text-2xl font-semibold mb-4'>Admin Dashboard</h1>
            <ul>
              {products.map(p => (
                <li key={p.id}>{p.name}</li>
              ))}
            </ul>
          </main>
        );
      }
      "






# ===========================================
# RULES END
# ===========================================
